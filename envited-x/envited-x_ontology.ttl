@prefix envited-x: <https://github.com/GAIA-X4PLC-AAD/ontology-management-base/tree/main/envited-x/> .
@prefix manifest: <https://github.com/GAIA-X4PLC-AAD/ontology-management-base/tree/main/manifest/> .
@prefix gx: <https://registry.lab.gaia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/spec/> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


# Ontology metadata
envited-x: a owl:Ontology ;
    rdfs:label "Ontology definition for envited-x"@en ;
    rdfs:comment "ENVITED-X Data Space ontology with common classes for defining a digital asset in the simulation domain."@en ;
    
    dcterms:creator "The GAIA-X 4 PLC AAD Project Team"@en ;
    dcterms:contributor [
        a foaf:Person ;
        foaf:name "Carlo van Driesten" ;
        org:memberOf <https://www.bmwgroup.com/> ;
    ] , [
        a foaf:Person ;
        foaf:name "Mirco Nierenz" ;
        org:memberOf <https://triangraphics.de/> ;
    ] , [
        a foaf:Person ;
        foaf:name "Erik Konietzko" ;
        org:memberOf <https://www.ipk.fraunhofer.de/> ;
    ] ;  

    # Permanent identifier for the ontology (not version-specific)
    dcterms:identifier <https://ontologies.envited-x.net/envited-x> ;

    # GitHub repository where the ontology is maintained
    dcterms:source <https://github.com/GAIA-X4PLC-AAD/ontology-management-base> ;

    # Specific GitHub release used for publishing this version
    prov:wasDerivedFrom <https://github.com/GAIA-X4PLC-AAD/ontology-management-base/releases/tag/v0.0.2> ;

    # Versioning
    owl:versionIRI <https://ontologies.envited-x.net/envited-x/v1/ontology> ;
    owl:versionInfo "v1" ;

    # Reference to SHACL validation rules
    dcterms:conformsTo <https://ontologies.envited-x.net/envited-x/v1/shape> ;

    # Additional references to the ENVITED Ecosystem Specification (EVES) or related ontologies
    dcterms:references <https://registry.lab.gaia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#> ;
    rdfs:seeAlso <https://ascs-ev.github.io/EVES/> .


# Example Query to Retrieve Simulation Assets and Their Metadata
# This query selects all instances of envited-x:SimulationAsset
# and retrieves the linked metadata stored in envited-x:DataResource.

# SPARQL Query:
# SELECT ?simulationAsset ?metadata
# WHERE {
#     ?simulationAsset a envited-x:SimulationAsset .
#     ?simulationAsset envited-x:hasDataResource ?metadata .
#     ?metadata a envited-x:DataResource . 
# }
#
# Core simulation asset class for the ENVITED-X Data Space
#
# Remark: Think about SimulationAsset being a subClassOf envited-X:DataResource
envited-x:SimulationAsset a owl:Class ;
    rdfs:label "Class definition for SimulationAsset"@en ;
    rdfs:comment """A structured digital asset in the ENVITED-X Data Space that aggregates metadata and a structured manifest.
                    This class serves as a modular container for various simulation-related resources, ensuring interoperability and extensibility.
                    Every SimulationAsset must be linked to at least one DataResource, which provides essential metadata, 
                    and a Manifest, which defines its internal structure and licensing information.
                    Subclasses of SimulationAsset can be introduced to represent specific asset types, such as HD Maps or Vehicle Models."""@en ;
    rdfs:subClassOf owl:Thing ;
    # Coupling to Gaia-X through a subclass of gx:DataResource
    rdfs:subClassOf [ 
        a owl:Restriction ; 
        owl:onProperty envited-x:hasDataResource ; 
        owl:someValuesFrom envited-x:DataResource 
    ] ;
    # Optional coupling to DataResourceExtension
    rdfs:subClassOf [ 
        a owl:Restriction ; 
        owl:onProperty envited-x:hasDataResourceExtension ; 
        owl:minCardinality 0
    ] ;
    # Coupling to a Manifest
    rdfs:subClassOf [ 
        a owl:Restriction ; 
        owl:onProperty envited-x:hasManifest ;  
        owl:cardinality 1
    ] .

# Ensures a SimulationAsset cannot also be classified as a DataResource.
# This enforces the distinction between structured digital assets (SimulationAsset)
# and their associated metadata resources (DataResource).
[ a owl:AllDisjointClasses ;
  owl:members ( envited-x:SimulationAsset envited-x:DataResource )
] .


envited-x:DataResourceExtension a owl:Class ;
    rdfs:label "Class definition for DataResourceExtension"@en ;
    rdfs:comment """A metadata extension that enriches a SimulationAsset with additional structured information. 
                    Unlike envited-x:DataResource, extensions do not represent standalone retrievable data assets but 
                    serve as auxiliary metadata linked to a SimulationAsset."""@en .


envited-x:Manifest a owl:Class ;
    rdfs:label "Class definition for Manifest"@en ;
    rdfs:comment "Defines a general manifest structure that can be extended for specific asset types, such as HD Maps or Vehicle Models."@en ;
    rdfs:subClassOf manifest:Manifest .


# Object properties
# This allows:
#
# All subclasses of SimulationAsset (e.g., hdmap:HdMap, vehicle:VehicleModel) to use hasDataResource without redefinition.
# Future assets to link to a DataResource without changing the ontology structure.
envited-x:hasDataResource a owl:ObjectProperty ;
    rdfs:label "has data resource"@en ;
    rdfs:domain envited-x:SimulationAsset ;
    rdfs:range envited-x:DataResource ;
    rdfs:comment "Links a simulation asset or its subclass to its associated DataResource, which provides essential metadata such as name and description."@en .

envited-x:hasDataResourceExtension a owl:ObjectProperty ;
    rdfs:label "has data resource extension"@en ;
    rdfs:comment """Links a SimulationAsset to one or more metadata extensions (e.g., georeference metadata, sensor calibration)
                    that provide additional structured information. Extensions do not function as independent data resources
                    but rather as supplementary metadata specific to a given SimulationAsset."""@en ;
    rdfs:domain envited-x:SimulationAsset ;
    rdfs:range envited-x:DataResourceExtension .
    

envited-x:hasManifest a owl:ObjectProperty ;
    rdfs:label "has manifest"@en ;
    rdfs:comment "Links a simulation asset or its subclass to the associated manifest that describes its structure and content."@en ;
    rdfs:domain envited-x:SimulationAsset ;
    rdfs:range envited-x:Manifest .
    